

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; MQTTany v0.13.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Launching" href="launch.html" />
    <link rel="prev" title="MQTTany" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MQTTany
          

          
          </a>

          
            
            
              <div class="version">
                v0.13.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#modules">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#paths">Paths</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ids">IDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="launch.html">Launching</a></li>
<li class="toctree-l1"><a class="reference internal" href="communication/index.html">Communication Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="communication/mqtt/index.html">MQTT</a><ul>
<li class="toctree-l3"><a class="reference internal" href="communication/mqtt/index.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="communication/mqtt/index.html#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="interface/index.html">Interface Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="interface/gpio/index.html">GPIO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interface/gpio/index.html#permissions">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/gpio/index.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/gpio/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/index.html#single-pin-definition">Single Pin Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/index.html#multiple-pin-definition">Multiple Pin Definition</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/gpio/index.html#supported-boards">Supported Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/board/raspi.html">Raspberry Pi</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/board/odroid.html">Odroid</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/board/orangepi.html">Orange Pi</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/gpio/index.html#supported-pin-types">Supported Pin Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/pin/digital.html">Digital Pin</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/gpio/pin/counter.html">Counter Pin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interface/i2c/index.html">I2C</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interface/i2c/index.html#permissions">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/i2c/index.html#devices">Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/i2c/devices/mcp230xx.html">MCP230xx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/i2c/index.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/i2c/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/i2c/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/i2c/index.html#device-definition">Device Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interface/onewire/index.html">OneWire</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interface/onewire/index.html#permissions">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/onewire/index.html#devices">Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/onewire/devices/ds18x20.html">DS18x20</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/onewire/index.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/onewire/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/onewire/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/onewire/index.html#single-device-definition">Single Device Definition</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/onewire/index.html#multiple-device-definition">Multiple Device Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interface/led/index.html">LED</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interface/led/animations.html">Animations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/led/animations/built-in.html">Built-in</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/led/animations/custom.html">Custom</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/led/animations.html#triggering">Triggering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/led/index.html#supported-outputs">Supported Outputs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/led/outputs/raspi.html">Raspberry Pi</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/led/outputs/sacn.html">Streaming ACN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/led/index.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/led/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/led/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="interface/led/index.html#array-definition">Array Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="interface/xset/index.html">XSET</a><ul>
<li class="toctree-l3"><a class="reference internal" href="interface/xset/index.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="interface/xset/index.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="interface/xset/index.html#module-settings">Module Settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="interface/xset/index.html#useful-xset-commands">Useful <code class="docutils literal notranslate"><span class="pre">xset</span></code> Commands</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/CrazyIvan359/mqttany/releases">Releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/CrazyIvan359/mqttany/blob/master/CHANGELOG.md">Change Log</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MQTTany</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/start.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This page gives you an introduction to the concepts in MQTTany and walks you through
getting a simple configuration up and running.</p>
<div class="section" id="modules">
<h2>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<p>MQTTany is made up of modules, each with a specific function. <em>Communication Modules</em>
provide a means to send states and receive commands from a controller, such as your
home automation solution. <em>Interface Modules</em> connect to the hardware, such as GPIO
pins or I2C devices, they provide states, and process commands. Details for each
module can be found on their pages which you can find in the categories in the
navigation bar to left. Most modules have additional requirements, make sure you
install them before using the module.</p>
</div>
<div class="section" id="paths">
<h2>Paths<a class="headerlink" href="#paths" title="Permalink to this headline">¶</a></h2>
<p>The concept of paths was introduced in version 0.12.0 in order to allow a generic
form of messaging between MQTTany modules. It is important to understand how paths are
composed so that you know where to find states and send commands to. Paths are similar
to topics in MQTT, and indeed are used to form the topics used in the MQTT module.</p>
<p>Interface modules will provide a map of the paths they provide data and receive
commands on, which communication modules can use to make a tree describing your MQTTany
configuration and provide to controllers. This map is composed of 1 or more <em>nodes</em>,
with each node having 1 or more <em>properties</em>.</p>
<p>As you will see in the example below, internally paths are composed of
<code class="docutils literal notranslate"><span class="pre">{node-id}/{property-id}</span></code>, but communication modules may preface them. Communication
modules, however, will not add anything to the end of a path. Commands can always
be sent to <code class="docutils literal notranslate"><span class="pre">{node-id}/{property-id}/set</span></code> for properties that support receiving
commands, but some interface modules support additional command paths.</p>
<p>While this does seem to limit the paths available, some communication modules will pass
all messages received that match the node and property the interface module has
advertised. Interface modules may also publish to paths made up of more than a node
and property that they advertise, but not all communication modules support this.</p>
<p>Paths are an internal concept to MQTTany, but are used to compose the externally
exposed data structure. For example a GPIO pin with an ID of <code class="docutils literal notranslate"><span class="pre">my-pin</span></code> would have a
path of <code class="docutils literal notranslate"><span class="pre">gpio/my-pin</span></code> for its state, where <code class="docutils literal notranslate"><span class="pre">gpio</span></code> is the node provided by the GPIO
module and <code class="docutils literal notranslate"><span class="pre">my-pin</span></code> is the property. The MQTT module requires a root topic be
specified, let’s use <code class="docutils literal notranslate"><span class="pre">my-host</span></code> in our example. Our pin would have it’s state
published by the MQTT module on the topic <code class="docutils literal notranslate"><span class="pre">my-host/gpio/my-pin</span></code>. In order to change
this pin you would add <code class="docutils literal notranslate"><span class="pre">set</span></code> to the path, resulting in the MQTT topic
<code class="docutils literal notranslate"><span class="pre">my-host/gpio/my-pin/set</span></code> to send your command to.</p>
</div>
<div class="section" id="ids">
<h2>IDs<a class="headerlink" href="#ids" title="Permalink to this headline">¶</a></h2>
<p>Paths contain node and property IDs which must conform to certain criteria. They may
only contain lowercase letters <code class="docutils literal notranslate"><span class="pre">a-z</span></code>, numbers <code class="docutils literal notranslate"><span class="pre">0-9</span></code>, or a hyphen <code class="docutils literal notranslate"><span class="pre">-</span></code>. IDs must
not start or end with a hyphen.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>MQTTany uses a YAML configuration file. The default location it looks for this file
in is <code class="docutils literal notranslate"><span class="pre">/etc/mqttany/mqttany.yml</span></code> but you can specify another location when launching.
There is an example configuration file included with MQTTany that has all the options
from every module along with a short description of each one, full documentation on
these options can be found on the module pages.</p>
<p>The configuration for our example from above would look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">mqtt</span><span class="p">:</span>
  <span class="nt">host</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span>
  <span class="nt">root topic</span><span class="p">:</span> <span class="s">&#39;my-host&#39;</span>

<span class="nt">gpio</span><span class="p">:</span>
  <span class="nt">my-pin</span><span class="p">:</span>
    <span class="nt">pin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">13</span>
    <span class="nt">direction</span><span class="p">:</span> <span class="s">&#39;output&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>There is no installation script at this time, so you will need to clone the
GitHub repository. The recommended location to clone the repo to is
<code class="docutils literal notranslate"><span class="pre">/opt/mqttany</span></code>, the following instructions will assume this location.</p>
<ol class="arabic">
<li><p>We need to make sure Python 3.6 and PIP are installed.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install python3 python3-pip
python3 --version
</pre></div>
</div>
<p>Make sure the version that was installed is at least Python 3.6. If it is
less you will need to install a newer version manually.
<a class="reference external" href="https://docs.python.org/3/using/unix.html#getting-and-installing-the-latest-version-of-python">This document</a>
from the Python documentation provides instructions.</p>
</li>
<li><p>Now we will change to the download directory and clone the repo. Replace
<code class="docutils literal notranslate"><span class="pre">VERSION</span></code> with the version you want to download (ex <code class="docutils literal notranslate"><span class="pre">v0.13.0</span></code>).</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> /opt
git clone -b VERSION https://github.com/CrazyIvan359/mqttany.git
<span class="nb">cd</span> mqttany
</pre></div>
</div>
<p>It may be necessary to use <code class="docutils literal notranslate"><span class="pre">sudo</span></code> to clone the repo into <code class="docutils literal notranslate"><span class="pre">/opt</span></code>, you can use
the commands below to give yourself access to the new <code class="docutils literal notranslate"><span class="pre">mqttany</span></code> directory without
using <cite>sudo</cite> for all operations.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo chown :<span class="nv">$USER</span> /opt/mqttany
sudo chmod -R g+rw /opt/mqttany
</pre></div>
</div>
</li>
<li><p>Next we need to make sure all of the requirements to run MQTTany are met.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip3 install -r requirements/mqttany.txt
</pre></div>
</div>
</li>
<li><p>Lastly we need to copy the configuration file to where MQTTany expects it.
You can also specify a configuration file when launching MQTTany if you
want, run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">mqttany/mqttany.py</span> <span class="pre">-h</span></code> for more information.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo mkdir /etc/mqttany
sudo cp /opt/mqttany/mqttany/config/mqttany.yml /etc/mqttany/mqttany.yml
</pre></div>
</div>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="launch.html" class="btn btn-neutral float-right" title="Launching" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="MQTTany" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, MQTTany Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>