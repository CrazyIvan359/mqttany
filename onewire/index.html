

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OneWire &mdash; MQTTany v0.11.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/overrides.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DS18x20" href="devices/ds18x20.html" />
    <link rel="prev" title="MCP230xx" href="../i2c/devices/mcp230xx.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: navy" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> MQTTany
          

          
          </a>

          
            
            
              <div class="version">
                v0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">MQTTany</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../launch.html">Launching</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/CrazyIvan359/mqttany/releases">Releases</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/CrazyIvan359/mqttany/blob/dev/CHANGELOG.md">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mqtt/index.html">MQTT Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mqtt/index.html#topics">Topics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mqtt/index.html#relative">Relative</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mqtt/index.html#absolute">Absolute</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mqtt/index.html#substitutions">Substitutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mqtt/index.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gpio/index.html">GPIO Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html#supported-boards">Supported Boards</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gpio/raspi.html">Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/odroid.html">Odroid</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html#substitutions">Substitutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html#single-pin-definition">Single Pin Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html#multiple-pin-definition">Multiple Pin Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../i2c/index.html#devices">Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../i2c/devices/mcp230xx.html">MCP230xx</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../i2c/index.html#substitutions">Substitutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2c/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../i2c/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c/index.html#device-definition">Device Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">OneWire Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#devices">Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="devices/ds18x20.html">DS18x20</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#substitutions">Substitutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-settings">Module Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#single-device-definition">Single Device Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-device-definition">Multiple Device Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../led/index.html">LED Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../led/animations.html">Animations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../led/animations/built-in.html">Built-in</a></li>
<li class="toctree-l3"><a class="reference internal" href="../led/animations/custom.html">Custom</a></li>
<li class="toctree-l3"><a class="reference internal" href="../led/animations.html#triggering">Triggering</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../led/index.html#supported-interfaces">Supported Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../led/interfaces/raspi.html">Raspberry Pi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../led/interfaces/sacn.html">Streaming ACN</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../led/index.html#substitutions">Substitutions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../led/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../led/index.html#module-settings">Module Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../led/index.html#array-definition">Array Definition</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../xset/index.html">XSET Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../xset/index.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../xset/index.html#module-settings">Module Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../xset/index.html#commands">Commands</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MQTTany</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>OneWire</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/onewire/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="onewire">
<h1>OneWire<a class="headerlink" href="#onewire" title="Permalink to this headline">¶</a></h1>
<p>The OneWire module provides access to Dallas/Maxim OneWire devices using the
<code class="docutils literal notranslate"><span class="pre">w1</span></code> kernel module. Support for OWFS is planned</p>
<p><strong>You need to have wire-1 installed and configured for this module to work.</strong></p>
<div class="admonition-don-t-forget-to-install-the-requirements admonition">
<p class="admonition-title">Don’t forget to install the requirements</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip3 install -r requirements/onewire.txt
</pre></div>
</div>
</div>
<div class="section" id="devices">
<h2>Devices<a class="headerlink" href="#devices" title="Permalink to this headline">¶</a></h2>
<p>See the device module pages below for details on each one and to see any
additional options available for them.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="devices/ds18x20.html">DS18x20</a></li>
</ul>
</div>
</div>
<div class="section" id="substitutions">
<h2>Substitutions<a class="headerlink" href="#substitutions" title="Permalink to this headline">¶</a></h2>
<p>The following additional substitutions are available for device topics:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{device_name}</span></code></p></td>
<td><p>will be replaced with the device definition section
name.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{device_type}</span></code></p></td>
<td><p>will be replaced with the device type
(<em>Ex.</em> <code class="docutils literal notranslate"><span class="pre">DS18B20</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">{address}</span></code></p></td>
<td><p>will be replaced with the device’s
<strong>FULL 8 BYTE ADDRESS</strong>
(not the xx-xxxxxxxxxxxx format used by <code class="docutils literal notranslate"><span class="pre">w1</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">{index}</span></code></p></td>
<td><p>will be replaced with the device’s index in the list
of addresses.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>Optional settings are commented out, default values are shown.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">onewire</span><span class="p">:</span>

  <span class="c1">#bus: &#39;w1&#39;</span>
  <span class="c1">#topic: &#39;{module_name}&#39;</span>
  <span class="c1">#topic get: &#39;poll&#39;</span>
  <span class="c1">#polling interval: 0.0</span>
  <span class="c1">#bus scan: false</span>

  <span class="nt">single_device</span><span class="p">:</span>
    <span class="nt">address</span><span class="p">:</span> <span class="s">&#39;&#39;</span>
    <span class="c1">#topic: &#39;{device_name}&#39;</span>

  <span class="nt">multiple_device</span><span class="p">:</span>
    <span class="nt">address</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&#39;&#39;</span><span class="p p-Indicator">,</span> <span class="s">&#39;&#39;</span><span class="p p-Indicator">]</span>
    <span class="c1">#topic: &#39;{device_name}&#39;</span>
    <span class="c1">#topic: [  ]    # can also provide a matching list of topics</span>
    <span class="c1">#first index: 0</span>
</pre></div>
</div>
<div class="section" id="module-settings">
<h3>Module Settings<a class="headerlink" href="#module-settings" title="Permalink to this headline">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bus</span></code></p></td>
<td><p>OneWire bus interface, currently only <code class="docutils literal notranslate"><span class="pre">w1</span></code> is
supported. OWFS support is planned.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">w1</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topic</span></code></p></td>
<td><p>Module topic to use for relative topics.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">{module_name}</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">topic</span> <span class="pre">get</span></code></p></td>
<td><p>Any message received on a device topic plus this
topic will result in the immediate publishing of the
device’s state. Default topics result in
<code class="docutils literal notranslate"><span class="pre">{root_topic}/{module_topic}/poll</span></code> for all devices
and
<code class="docutils literal notranslate"><span class="pre">{root_topic}/{module_topic}/{device_name}/poll</span></code>
for individual devices.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">poll</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">polling</span> <span class="pre">interval</span></code></p></td>
<td><p>Interval in seconds to publish all pin states.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">0.0</span></code> <em>(off)</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">bus</span> <span class="pre">scan</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to have the OneWire module scan the
bus for any devices that are not defined in the
configuration file. Any devices found will be added
with default options and their device topic set to
<code class="docutils literal notranslate"><span class="pre">{address}</span></code>.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="single-device-definition">
<h3>Single Device Definition<a class="headerlink" href="#single-device-definition" title="Permalink to this headline">¶</a></h3>
<p>Device configuration section names must be unique and are used only in logging
and for the <cite>{device_name}</cite> substitution in topics. The following settings are
for single device definitions:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">address</span></code></p></td>
<td><p>The device’s address, can be 7 or 8 bytes, can use
<code class="docutils literal notranslate"><span class="pre">w1</span></code> style <code class="docutils literal notranslate"><span class="pre">xx-xxxxxxxxxxxx</span></code>.</p>
<p><strong>MUST BE IN SINGLE QUOTES</strong> <code class="docutils literal notranslate"><span class="pre">''</span></code>.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topic</span></code></p></td>
<td><p>Topic for the device.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">{device_name}</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="multiple-device-definition">
<h3>Multiple Device Definition<a class="headerlink" href="#multiple-device-definition" title="Permalink to this headline">¶</a></h3>
<p>It is also possible to define settings for several devices at the same time.
Settings from single device definitions apply here also, except for those
shown below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">address</span></code></p></td>
<td><p>Instead of a single address you can specify a list
of addresses.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">topic</span></code></p></td>
<td><p>For multiple device definitions, topic can be a
single topic or a list of topics the same length as
the list of addresses. An additional substitution
<code class="docutils literal notranslate"><span class="pre">{index}</span></code> is available when a list of addresses is
given. It corresponds to the device’s index in the
list plus <em>first index</em>.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">{device_name}</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">first</span> <span class="pre">index</span></code></p></td>
<td><p>Will be added to device’s index in the list of
addresses when subsituting <code class="docutils literal notranslate"><span class="pre">{index}</span></code> in topics.</p>
<p><em>Optional, default</em> <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="devices/ds18x20.html" class="btn btn-neutral float-right" title="DS18x20" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../i2c/devices/mcp230xx.html" class="btn btn-neutral float-left" title="MCP230xx" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, MQTTany Contributors

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>